


ARM Macro Assembler    Page 1 


    1 00000000 E000ED04 
                       NVIC_INT_CTRL
                               EQU              0xE000ED04  ; ÖÐ¶Ï¿ØÖÆ¼Ä´æÆ÷
    2 00000000 E000ED22 
                       NVIC_SYSPRI2
                               EQU              0xE000ED22  ; ÏµÍ³ÓÅÏÈ¼¶¼Ä´æÆ÷(
                                                            ÓÅÏÈ¼¶14).
    3 00000000 000000FF 
                       NVIC_PENDSV_PRI
                               EQU              0xFF        ; PendSVÓÅÏÈ¼¶(×îµÍ
                                                            ).
    4 00000000 10000000 
                       NVIC_PENDSVSET
                               EQU              0x10000000  ; PendSV´¥·¢Öµ 
    5 00000000         
    6 00000000                 AREA             CODE,CODE,READONLY, ALIGN=3
    7 00000000         
    8 00000000                 PRESERVE8
    9 00000000                 THUMB
   10 00000000         
   11 00000000         ;*******************************************************
                       **************************************************
   12 00000000         ;* º¯ Êý Ãû  :   PendSV_Handler
   13 00000000         ;* ¹¦ÄÜËµÃ÷  :   ÔÚÖÐ¶Ï·þÎñ³ÌÐòÖÐÖ´ÐÐÈÎÎñÇÐ»»£¬±£´æµ±Ç°È
                       ÎÎñÏÖ³¡£¬»Ö¸´ÏÂÒ»ÈÎÎñµÄÏÖ³¡
   14 00000000         ;* ÐÎ    ²Î  :   ÎÞ
   15 00000000         ;* ·µ »Ø Öµ  :   ÎÞ
   16 00000000         ;*******************************************************
                       **************************************************
   17 00000000         PendSV_Handler
                               PROC
   18 00000000                 EXPORT           PendSV_Handler 
                                                            ;PendSVÒì³£´¦Àíº¯Êý
                                                            
   19 00000000                 IMPORT           currentTask ;µ¼ÈëÈ«¾Ö±äÁ¿curren
                                                            tTask 
   20 00000000                 IMPORT           nextTask    ;µ¼ÈëÈ«¾Ö±äÁ¿nextTa
                                                            sk 
   21 00000000         
   22 00000000 F3EF 8009       MRS              R0, PSP     ;»ñÈ¡µ±Ç°ÈÎÎñµÄ¶ÑÕ»
                                                            Ö¸ÕëµÄÖµ 
   23 00000004 B120            CBZ              R0, PendSVHandler_nosave ;ÈôÊÇÓ
                                                            ÉtTaskRunFirst´¥·¢£
                                                            ¬Ôò²»Ö´ÐÐÏÂÃæ±£´æ¼Ä
                                                            ´æÆ÷µÄ²Ù×÷£¬Ö±½ÓÖ´Ð
                                                            ÐPendSVHandler_nosa
                                                            ve£¬»Ö¸´¼Ä´æÆ÷ 
   24 00000006         
   25 00000006 E920 0FF0       STMDB            R0!, {R4-R11} ;³ýR4-R11Íâ£¬ÆäËü
                                                            ¼Ä´æÆ÷»á×Ô¶¯±£´æ£¬Ë
                                                            ùÒÔÐèÒªÊÖ¶¯±£´æR4-R
                                                            11     
   26 0000000A         
   27 0000000A 4910            LDR              R1, =currentTask ;±£´æÕ»¶¥Î»ÖÃc
                                                            urrentTask£¬ÒòÎªÔÚt
                                                            TaskÊý¾Ý½á¹¹ÖÐ£¬sta
                                                            ckÎ»ÓÚÆðÊ¼Î»ÖÃ£¬ËùÒ
                                                            Ô±£´æcurrentTask
   28 0000000C 6809            LDR              R1, [R1]    ;Ò²¾ÍÊÇ±£´æÁË¶ÑÕ»µÄ



ARM Macro Assembler    Page 2 


                                                            Õ»¶¥
   29 0000000E 6008            STR              R0, [R1]
   30 00000010         
   31 00000010         PendSVHandler_nosave                 ;»Ö¸´ÏÂÒ»ÈÎÎñµÄ¼Ä´æ
                                                            Æ÷
   32 00000010         
   33 00000010 480E            LDR              R0, =currentTask
   34 00000012 490F            LDR              R1, =nextTask
   35 00000014 680A            LDR              R2, [R1]
   36 00000016 6002            STR              R2, [R0]    ;½«currentTaskÉèÖÃÎ
                                                            ªnextTask£¬ÏÂÒ»ÈÎÎñ
                                                            ±äÎªµ±Ç°ÈÎÎñ
   37 00000018         
   38 00000018 6810            LDR              R0, [R2]    ;´ÓcurrentTaskµÄ¶ÑÕ
                                                            »ÖÐ¿ªÊ¼»Ö¸´¼Ä´æÆ÷
   39 0000001A E8B0 0FF0       LDMIA            R0!, {R4-R11} ;»Ö¸´R4-R11¼Ä´æÆ÷
                                                            
   40 0000001E         
   41 0000001E F380 8809       MSR              PSP, R0     ;»Ö¸´¶ÑÕ»Ö¸Õëµ½PSP
   42 00000022 F04E 0E04       ORR              LR, LR, #0x04 ;Ê¹ÓÃPSPËùÖ¸ÏòµÄ¶
                                                            ÑÕ»Îªµ±Ç°µÄ¶ÑÕ»£¬Pe
                                                            ndSVÊ¹ÓÃµÄÊÇMSP
   43 00000026 4770            BX               LR          ;ÍË³öPendSVÒì³£´¦Àí
                                                            
   44 00000028                 ENDP
   45 00000028         
   46 00000028         ;*******************************************************
                       **************************************************
   47 00000028         ;* º¯ Êý Ãû  :   tTaskSwitch
   48 00000028         ;* ¹¦ÄÜËµÃ÷  :   ´¥·¢PENDSVÖÐ¶Ï
   49 00000028         ;* ÐÎ    ²Î  :   ÎÞ
   50 00000028         ;* ·µ »Ø Öµ  :   ÎÞ
   51 00000028         ;*******************************************************
                       **************************************************
   52 00000028         tTaskSwitch
                               PROC
   53 00000028                 EXPORT           tTaskSwitch ;PENDSVÖÐ¶Ï´¥·¢º¯Êý
                                                            
   54 00000028 480A            LDR              R0,=NVIC_INT_CTRL
   55 0000002A F04F 5180       LDR              R1,=NVIC_PENDSVSET
   56 0000002E 6001            STR              R1,[R0]     ;´¥·¢PendSVÒì³£
   57 00000030 4770            BX               LR          ;°ÑLR¼Ä´æÆ÷µÄÄÚÈÝ¸´
                                                            ÖÆµ½PC¼Ä´æÆ÷Àï £¬´Ó
                                                            ¶øÊµÏÖº¯ÊýµÄ·µ»Ø
   58 00000032                 ENDP
   59 00000032         
   60 00000032         ;*******************************************************
                       **************************************************
   61 00000032         ;* º¯ Êý Ãû  :   tTaskRunFirst
   62 00000032         ;* ¹¦ÄÜËµÃ÷  :   ÉèÖÃPSP¼Ä´æÆ÷Îª0£¬±ê¼ÇÊÇµÚÒ»´ÎÖ´ÐÐÈÎÎñÇ
                       Ð»»£¬ÅäÖÃPENDSVÖÐ¶ÏÓÅÏÈ¼¶Îª×îµÍ²¢´¥·¢¸ÃÖÐ¶Ï
   63 00000032         ;* ÐÎ    ²Î  :   ÎÞ
   64 00000032         ;* ·µ »Ø Öµ  :   ÎÞ
   65 00000032         ********************************************************
*************************************************
   66 00000032         tTaskRunFirst
                               PROC
   67 00000032                 EXPORT           tTaskRunFirst
   68 00000032 2000            MOVS             R0,#0       ;ÈÎÎñ¶ÑÕ»ÉèÖÃÎª0



ARM Macro Assembler    Page 3 


   69 00000034 F380 8809       MSR              PSP,R0      ;PSPÇåÁã£¬×÷ÎªÊ×´ÎÉ
                                                            ÏÏÂÎÄÇÐ»»µÄ±êÖ¾ 
   70 00000038         
   71 00000038 4807            LDR              R0,=NVIC_SYSPRI2
   72 0000003A F04F 01FF       LDR              R1,=NVIC_PENDSV_PRI ;ÉèÖÃPENDSV
                                                            ÖÐ¶ÏµÄÓÅÏÈ¼¶Îª×îµÍ
   73 0000003E 7001            STRB             R1,[R0]
   74 00000040         
   75 00000040 4804            LDR              R0,=NVIC_INT_CTRL
   76 00000042 F04F 5180       LDR              R1,=NVIC_PENDSVSET
   77 00000046 6001            STR              R1,[R0]     ;´¥·¢PendSVÒì³£,ÔÚP
                                                            ENDSVÖÐ¶Ï·þÎñ³ÌÐòÖÐ
                                                            Ö´ÐÐÈÎÎñÇÐ»»
   78 00000048         
   79 00000048 4770            BX               LR          ;°ÑLR¼Ä´æÆ÷µÄÄÚÈÝ¸´
                                                            ÖÆµ½PC¼Ä´æÆ÷Àï £¬´Ó
                                                            ¶øÊµÏÖº¯ÊýµÄ·µ»Ø
   80 0000004A                 ENDP
   81 0000004A         
   82 0000004A                 END
              00 00 00000000 
              00000000 
              E000ED04 
              E000ED22 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M7.fp.dp --apcs=
interwork --depend=stm32f767zi_os\core.d -ostm32f767zi_os\core.o -I.\RTE\_stm32
f767zi_os -I"E:\Program Files (x86)\Keil_v526\ARM\PACK\ARM\CMSIS\5.4.0\CMSIS\Co
re\Include" -I"E:\Program Files (x86)\Keil_v526\ARM\PACK\Keil\STM32F7xx_DFP\2.1
2.0\Drivers\CMSIS\Device\ST\STM32F7xx\Include" --predefine="__MICROLIB SETA 1" 
--predefine="__UVISION_VERSION SETA 526" --predefine="_RTE_ SETA 1" --predefine
="STM32F767xx SETA 1" --list=core.lst ..\SolarOS\Src\core.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CODE 00000000

Symbol: CODE
   Definitions
      At line 6 in file ..\SolarOS\Src\core.s
   Uses
      None
Comment: CODE unused
PendSVHandler_nosave 00000010

Symbol: PendSVHandler_nosave
   Definitions
      At line 31 in file ..\SolarOS\Src\core.s
   Uses
      At line 23 in file ..\SolarOS\Src\core.s
Comment: PendSVHandler_nosave used once
PendSV_Handler 00000000

Symbol: PendSV_Handler
   Definitions
      At line 17 in file ..\SolarOS\Src\core.s
   Uses
      At line 18 in file ..\SolarOS\Src\core.s
Comment: PendSV_Handler used once
tTaskRunFirst 00000032

Symbol: tTaskRunFirst
   Definitions
      At line 66 in file ..\SolarOS\Src\core.s
   Uses
      At line 67 in file ..\SolarOS\Src\core.s
Comment: tTaskRunFirst used once
tTaskSwitch 00000028

Symbol: tTaskSwitch
   Definitions
      At line 52 in file ..\SolarOS\Src\core.s
   Uses
      At line 53 in file ..\SolarOS\Src\core.s
Comment: tTaskSwitch used once
5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

NVIC_INT_CTRL E000ED04

Symbol: NVIC_INT_CTRL
   Definitions
      At line 1 in file ..\SolarOS\Src\core.s
   Uses
      At line 54 in file ..\SolarOS\Src\core.s
      At line 75 in file ..\SolarOS\Src\core.s

NVIC_PENDSVSET 10000000

Symbol: NVIC_PENDSVSET
   Definitions
      At line 4 in file ..\SolarOS\Src\core.s
   Uses
      At line 55 in file ..\SolarOS\Src\core.s
      At line 76 in file ..\SolarOS\Src\core.s

NVIC_PENDSV_PRI 000000FF

Symbol: NVIC_PENDSV_PRI
   Definitions
      At line 3 in file ..\SolarOS\Src\core.s
   Uses
      At line 72 in file ..\SolarOS\Src\core.s
Comment: NVIC_PENDSV_PRI used once
NVIC_SYSPRI2 E000ED22

Symbol: NVIC_SYSPRI2
   Definitions
      At line 2 in file ..\SolarOS\Src\core.s
   Uses
      At line 71 in file ..\SolarOS\Src\core.s
Comment: NVIC_SYSPRI2 used once
4 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

currentTask 00000000

Symbol: currentTask
   Definitions
      At line 19 in file ..\SolarOS\Src\core.s
   Uses
      At line 27 in file ..\SolarOS\Src\core.s
      At line 33 in file ..\SolarOS\Src\core.s

nextTask 00000000

Symbol: nextTask
   Definitions
      At line 20 in file ..\SolarOS\Src\core.s
   Uses
      At line 34 in file ..\SolarOS\Src\core.s
Comment: nextTask used once
2 symbols
348 symbols in table
